!function(){this.Path=function(){if(!arguments[0])throw"settings are required";var a=arguments[0];for(var b in a){var c=a[b];this[b]=c}this.spline=null,this.vertices=null,this.faces=null,this.geometry=null,this.splineObj=null,this.markers=[]},Path.prototype.create=function(){for(var a=this,b=[],c=1;c<a.points.length;c++)b.push(new THREE.Vector3(a.points[c].x,a.points[c].y,a.points[c].z+20));a.spline=new THREE.SplineCurve3(b),a.vertices=a.spline.getPoints(1e3);var d=new THREE.Geometry;d.vertices=a.vertices,a.geometry=new THREE.MeshLine,a.geometry.setGeometry(d,function(a){return 1*Math.pow(4*a*(1-a),1)});var e=new THREE.MeshLineMaterial({useMap:!1,color:new THREE.Color(15559258),transparent:!0,opacity:.5,resolution:new THREE.Vector2(window.innerWidth,window.innerHeight),sizeAttenuation:!1,lineWidth:10,near:1,far:5e3});a.splineObj=new THREE.Mesh(a.geometry.geometry,e),a.splineObj.name="route",a.scene.add(a.splineObj)},Path.prototype.clear=function(){var a=scene.getObjectByName("route");scene.remove(a)},Path.prototype.addMarkers=function(a){for(var b=this,c=1;c<b.points.length;c++){var d=30,e=50,f=new THREE.PlaneGeometry(d,e,1),g=new THREE.MeshBasicMaterial({side:THREE.DoubleSide,transparent:!0,opacity:1});g.map=(new THREE.TextureLoader).load("images/core/"+a[c-1]+".png");var h=new THREE.Mesh(f,g);b.scene.add(h),h.position.x=b.points[c].x,h.position.y=b.points[c].y,h.position.z=b.points[c].z+20+e/2,b.markers.push(h)}},Path.prototype.updateMarker=function(a,b,c){for(var d=this,e=0;e<d.markers.length;e++){var f=d.markers[e];e==a?f.material.opacity=1-c:f.material.opacity=1,f.quaternion.copy(b.quaternion)}},Path.prototype.showMarker=function(a){var b=this,c=b.markers[a];c.visible=!0},Path.prototype.hideMarker=function(a){var b=this,c=b.markers[a];c.visible=!1}}();